@page "/admin/talento-humano"
@using Microsoft.AspNetCore.Components.Web
@using Microsoft.AspNetCore.Components
@layout proyectoAgiles.Layout.MainLayout
@inject NavigationManager Navigation
@inject proyectoAgiles.Services.UserSessionService UserSession

<PageTitle>Talento Humano - UTA</PageTitle>

<div class="talento-humano-page">
    <!-- Botón Volver Flotante -->
    <div class="back-button-container">
        <button class="btn btn-outline-secondary" @onclick="GoBack">
            <i class="fas fa-arrow-left"></i> Volver
        </button>
    </div>

    <div class="page-container">
        <!-- Título de la Página -->
        <div class="page-header">
            <div class="header-content">
                <h1 class="page-title">Talento Humano</h1>
                <p class="page-subtitle">Gestión de recursos humanos y personal institucional</p>
            </div>
        </div>

        <!-- Tarjetas de Talento Humano -->
        <div class="talento-humano-cards">
            <div class="cards-container">
                <div class="action-card fade-in-1" @onclick="NavigateToPresidenteComision">
                    <div class="action-icon">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <h3>Presidente de la Comisión Académica</h3>
                    <p>Escalafón y Promoción del personal académico</p>
                </div>
                
                <div class="action-card fade-in-2" @onclick="NavigateToDireccionTalentoHumano">
                    <div class="action-icon">
                        <i class="fas fa-building"></i>
                    </div>
                    <h3>Dirección de Talento Humano</h3>
                    <p>Gestión administrativa y operativa del personal</p>
                </div>
                
                <div class="action-card fade-in-3" @onclick="NavigateToComisionAcademica">
                    <div class="action-icon">
                        <i class="fas fa-users-cog"></i>
                    </div>
                    <h3>Comisión Académica de Escalafón</h3>
                    <p>Promoción del personal académico institucional</p>
                </div>
            </div>
        </div>

        <!-- Información Adicional -->
        <div class="info-section">
            <div class="info-card">
                <div class="info-header">
                    <i class="fas fa-info-circle"></i>
                    <h4>Información del Sistema de Talento Humano</h4>
                </div>
                <div class="info-content">
                    <p>El sistema de Talento Humano de la Universidad Técnica de Ambato gestiona todos los procesos relacionados con el personal académico y administrativo, incluyendo:</p>
                    <ul>
                        <li><strong>Escalafón Docente:</strong> Gestión de promociones y ascensos del personal académico</li>
                        <li><strong>Evaluación del Desempeño:</strong> Procesos de evaluación integral del personal</li>
                        <li><strong>Capacitación:</strong> Programas de desarrollo profesional y actualización</li>
                        <li><strong>Administración de Personal:</strong> Gestión administrativa y operativa</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    protected override async Task OnInitializedAsync()
    {
        // Asegurar que la sesión esté inicializada
        await UserSession.InitializeAsync();
        
        // Verificar que el usuario esté autenticado y sea admin
        if (UserSession.CurrentUser == null || UserSession.CurrentUser.UserType != 1)
        {
            Navigation.NavigateTo("/login");
            return;
        }
    }

    private void GoBack()
    {
        Navigation.NavigateTo("/admin");
    }

    private void NavigateToPresidenteComision()
    {
        Navigation.NavigateTo("/admin/presidente-comision-academica");
    }

    private void NavigateToDireccionTalentoHumano()
    {
        Navigation.NavigateTo("/admin/direccion-talento-humano");
    }

    private void NavigateToComisionAcademica()
    {
        Navigation.NavigateTo("/admin/comision-academica-escalafon");
    }
}
