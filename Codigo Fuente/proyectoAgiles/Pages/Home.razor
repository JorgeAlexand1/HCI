@page "/"
@using Microsoft.AspNetCore.Components.Web

<PageTitle>Proyecto Ágiles - UTA</PageTitle>

<div class="page-container">
    <!-- Carrusel Principal -->
    <div id="carruselPrincipal" class="carousel slide carousel-fade" data-bs-ride="carousel">
        <!-- Indicadores -->
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#carruselPrincipal" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#carruselPrincipal" data-bs-slide-to="1" aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#carruselPrincipal" data-bs-slide-to="2" aria-label="Slide 3"></button>
            <button type="button" data-bs-target="#carruselPrincipal" data-bs-slide-to="3" aria-label="Slide 4"></button>
        </div>
        
        <!-- Slides del carrusel -->
        <div class="carousel-inner">
            <div class="carousel-item active" data-bs-interval="5000">
                <img src="images/carrusel_1.jpg" class="d-block w-100 carousel-image" alt="Universidad Técnica de Ambato - Imagen 1">
                <div class="carousel-caption d-none d-md-block">
                    <div class="caption-content">
                        <a href="/login" class="btn btn-primary btn-lg postularse-btn">Postularse</a>
                    </div>
                </div>
            </div>
            <div class="carousel-item" data-bs-interval="5000">
                <img src="images/carrusel_2.jpg" class="d-block w-100 carousel-image" alt="Campus Universitario - Imagen 2">
                <div class="carousel-caption d-none d-md-block">
                    <div class="caption-content">
                        <a href="/login" class="btn btn-primary btn-lg postularse-btn">Postularse</a>
                    </div>
                </div>
            </div>
            <div class="carousel-item" data-bs-interval="5000">
                <img src="images/carrusel_3.jpg" class="d-block w-100 carousel-image" alt="Investigación y Tecnología - Imagen 3">
                <div class="carousel-caption d-none d-md-block">
                    <div class="caption-content">
                        <a href="/login" class="btn btn-primary btn-lg postularse-btn">Postularse</a>
                    </div>
                </div>
            </div>
            <div class="carousel-item" data-bs-interval="5000">
                <img src="images/carrusel_4.jpg" class="d-block w-100 carousel-image" alt="Vida Estudiantil - Imagen 4">
                <div class="carousel-caption d-none d-md-block">
                    <div class="caption-content">
                        <a href="/login" class="btn btn-primary btn-lg postularse-btn">Postularse</a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Controles del carrusel -->
        <button class="carousel-control-prev" type="button" data-bs-target="#carruselPrincipal" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Anterior</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carruselPrincipal" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Siguiente</span>
        </button>
    </div>
    
    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="footer-section">
                        <img src="images/uta-logo.png" alt="UTA Logo" class="footer-logo mb-3">
                        <h5 class="footer-title">Universidad Técnica de Ambato</h5>
                        <p class="footer-text">
                            Formando profesionales íntegros con excelencia académica y compromiso social.
                        </p>
                        <div class="social-links">
                            <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                            <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                            <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                            <a href="#" class="social-link"><i class="fab fa-linkedin-in"></i></a>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-2 col-md-6 mb-4">
                    <div class="footer-section">
                        <h6 class="footer-subtitle">Académico</h6>
                        <ul class="footer-links">
                            <li><a href="#">Admisiones</a></li>
                            <li><a href="#">Carreras</a></li>
                            <li><a href="#">Postgrados</a></li>
                            <li><a href="#">Investigación</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="col-lg-2 col-md-6 mb-4">
                    <div class="footer-section">
                        <h6 class="footer-subtitle">Servicios</h6>
                        <ul class="footer-links">
                            <li><a href="#">Biblioteca</a></li>
                            <li><a href="#">Campus Virtual</a></li>
                            <li><a href="#">Bienestar</a></li>
                            <li><a href="#">Proyectos</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="footer-section">
                        <h6 class="footer-subtitle">Contacto</h6>
                        <div class="contact-info">
                            <p class="contact-item">
                                <i class="fas fa-map-marker-alt"></i>
                                Av. Los Chasquis y Río Payamino, Ambato - Ecuador
                            </p>
                            <p class="contact-item">
                                <i class="fas fa-phone"></i>
                                (03) 2400-435 / 2401-309
                            </p>
                            <p class="contact-item">
                                <i class="fas fa-envelope"></i>
                                comunicacion@uta.edu.ec
                            </p>
                            <p class="contact-item">
                                <i class="fas fa-globe"></i>
                                www.uta.edu.ec
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            
            <hr class="footer-divider">
            
            <div class="row">
                <div class="col-md-6">
                    <p class="footer-copyright">
                        © 2024 Universidad Técnica de Ambato. Todos los derechos reservados.
                    </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <div class="footer-links-inline">
                        <a href="#" class="footer-link-inline">Política de Privacidad</a>
                        <a href="#" class="footer-link-inline">Términos de Uso</a>
                        <a href="#" class="footer-link-inline">Contacto</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
</div>

<script>
    // Función simplificada para inicializar el carrusel
    function inicializarCarrusel() {
        console.log(' Inicializando carrusel...');
        
        const carruselElement = document.getElementById('carruselPrincipal');
        if (!carruselElement) {
            console.error(' Elemento del carrusel no encontrado');
            return;
        }

        // Verificar si Bootstrap está disponible
        if (typeof bootstrap === 'undefined') {
            console.log(' Bootstrap no disponible, reintentando en 500ms...');
            setTimeout(inicializarCarrusel, 500);
            return;
        }

        try {
            // Limpiar cualquier instancia previa
            const instanciaPrevia = bootstrap.Carousel.getInstance(carruselElement);
            if (instanciaPrevia) {
                instanciaPrevia.dispose();
                console.log(' Instancia previa eliminada');
            }

            // Crear nueva instancia del carrusel
            const carrusel = new bootstrap.Carousel(carruselElement, {
                interval: 5000,        // Cambiar cada 5 segundos
                ride: 'carousel',      // Iniciar automáticamente
                pause: 'hover',        // Pausar al hacer hover
                wrap: true,            // Volver al inicio después del último slide
                keyboard: true,        // Permitir navegación con teclado
                touch: true            // Permitir gestos táctiles
            });

            // Agregar eventos de depuración
            carruselElement.addEventListener('slide.bs.carousel', function(event) {
                console.log(' Transición: de slide ' + event.from + ' a slide ' + event.to);
            });

            carruselElement.addEventListener('slid.bs.carousel', function(event) {
                console.log(' Transición completada: slide ' + event.to + ' activo');
                const imagenActual = carruselElement.querySelector('.carousel-item.active img');
                if (imagenActual) {
                    console.log(' Imagen actual: ' + imagenActual.src);
                }
            });

            // Forzar inicio del ciclo automático
            carrusel.cycle();
            
            console.log(' Carrusel inicializado correctamente con intervalo de 5 segundos');
            
            // Verificar funcionamiento después de 6 segundos
            setTimeout(function() {
                const slideActivo = carruselElement.querySelector('.carousel-item.active');
                if (slideActivo) {
                    console.log(' Carrusel funcionando - Slide activo detectado');
                } else {
                    console.warn(' No se detectó slide activo');
                }
            }, 6000);

        } catch (error) {
            console.error(' Error al inicializar carrusel:', error);
        }
    }

    // Inicializar cuando el DOM esté listo
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', inicializarCarrusel);
    } else {
        inicializarCarrusel();
    }

    // También inicializar cuando la ventana esté completamente cargada
    window.addEventListener('load', function() {
        setTimeout(inicializarCarrusel, 1000);
    });

    // Para compatibilidad con Blazor
    if (typeof Blazor !== 'undefined') {
        Blazor.addEventListener('enhancedload', inicializarCarrusel);
    }
</script>
